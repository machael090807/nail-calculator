<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Fairy. L å ±åƒ¹ç³»çµ±</title>
    
    <link rel="apple-touch-icon" href="logo.jpg">
    <link rel="icon" href="logo.jpg">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">

    <style>
        /* ğŸ¨ å¥¶èŒ¶è‰²ä¸»é¡Œ (ç¶­æŒä¸è®Š) */
        :root {
            --bg-color: #F3E5D8;
            --text-color: #4E342E;
            --border-color: #DCC7A1;
            --white: #ffffff;
            --accent: #8D6E63;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            padding: 20px;
            margin: 0;
            -webkit-tap-highlight-color: transparent;
        }

        h1 {
            text-align: center;
            font-size: clamp(1.5rem, 6vw, 2.2rem);
            margin-bottom: 10px;
            margin-top: 10px;
        }

        .subtitle {
            text-align: center;
            font-size: 0.9rem;
            margin-bottom: 20px;
            opacity: 0.8;
        }

        .section { margin-bottom: 25px; }
        .section-title { font-weight: bold; margin-bottom: 10px; font-size: 1.1rem; border-left: 4px solid var(--text-color); padding-left: 10px; }

        /* è·ç´šé¸æ“‡å™¨æ¨£å¼ */
        .role-selector {
            display: flex;
            background: rgba(255,255,255,0.5);
            border-radius: 12px;
            padding: 5px;
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
        }
        .role-option {
            flex: 1;
            text-align: center;
            padding: 10px;
            cursor: pointer;
            border-radius: 8px;
            font-weight: bold;
            transition: 0.3s;
        }
        .role-option.active {
            background-color: var(--text-color);
            color: var(--white);
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        /* é¸é …ç¶²æ ¼ */
        .options-grid { display: flex; flex-direction: column; gap: 10px; }
        
        /* å–®é¸/è¤‡é¸æŒ‰éˆ•æ¨£å¼ */
        .option-label {
            display: flex; align-items: center; justify-content: space-between;
            background: rgba(255,255,255,0.4);
            padding: 12px 15px; border-radius: 12px;
            border: 1px solid var(--border-color);
            cursor: pointer; transition: 0.2s;
        }
        /* é¸ä¸­æ™‚çš„æ¨£å¼ */
        .option-label:has(input:checked) {
            background: rgba(255,255,255,0.9);
            border-color: var(--text-color);
            box-shadow: 0 0 0 1px var(--text-color);
        }

        input[type="radio"], input[type="checkbox"] {
            accent-color: var(--text-color);
            transform: scale(1.3);
            margin-left: 10px;
        }

        /* è¼¸å…¥æ¡† */
        .input-group { display: flex; gap: 15px; }
        .input-wrapper { flex: 1; }
        .input-wrapper label { display: block; font-size: 0.9rem; margin-bottom: 5px; }
        input[type="number"] {
            width: 100%; padding: 12px;
            border: 1px solid var(--border-color); border-radius: 8px;
            background: rgba(255,255,255,0.6);
            font-size: 1.1rem; color: var(--text-color);
            text-align: center; box-sizing: border-box;
            -moz-appearance: textfield;
        }

        /* å„ªæƒ å€å¡Š */
        .promo-box {
            border: 2px dashed var(--border-color); border-radius: 12px;
            padding: 15px; margin-top: 20px;
            background: rgba(255,255,255,0.3);
        }
        .toggle-wrapper {
            display: flex; justify-content: space-between; align-items: center;
            font-size: 1.1rem; font-weight: bold;
        }

        /* çµæœèˆ‡è¼¸å‡º */
        .result-section {
            margin-top: 30px; border-top: 2px solid var(--border-color); padding-top: 20px;
        }
        .total-display {
            text-align: center; font-size: 2.2rem; font-weight: 800; margin-bottom: 15px;
            color: var(--text-color);
        }

        textarea {
            width: 100%; height: 220px;
            background: rgba(255,255,255,0.7);
            border: 1px solid var(--border-color); border-radius: 8px;
            padding: 15px; font-size: 1rem; color: var(--text-color);
            box-sizing: border-box; margin-bottom: 10px;
            font-family: monospace; /* è®“æ’ç‰ˆå°é½Š */
        }

        button.copy-btn {
            width: 100%; background-color: var(--text-color); color: #fff;
            padding: 15px; border: none; border-radius: 12px;
            font-size: 1.1rem; font-weight: bold; cursor: pointer;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        button.copy-btn:active { transform: scale(0.98); }
        
        /* åˆ†é¡æ¨™ç±¤ (å°å­—) */
        .cat-tag {
            font-size: 0.8rem;
            color: var(--white);
            background-color: var(--accent);
            padding: 2px 6px;
            border-radius: 4px;
            margin-right: 8px;
        }
    </style>
</head>
<body>

    <h1>Fairy. L NAIL ART</h1>
    <div class="subtitle">2025/11 åƒ¹ç›®è¡¨</div>

    <div class="role-selector" id="roleContainer">
        <div class="role-option" onclick="setRole('manager')">åº—é•·</div>
        <div class="role-option active" onclick="setRole('artist')">ç¾ç”²å¸«</div>
        <div class="role-option" onclick="setRole('assistant')">åŠ©ç†</div>
    </div>

    <div class="section">
        <div class="section-title">é¸æ“‡é …ç›®</div>
        <div class="options-grid">
            <label class="option-label"><span><span class="cat-tag">å–®è‰²</span>å–®è‰²å‡è† </span> <input type="radio" name="service" value="single" checked></label>
            <label class="option-label"><span><span class="cat-tag">å–®è‰²</span>è²“çœ¼å‡è† </span> <input type="radio" name="service" value="cateye"></label>
            
            <label class="option-label"><span><span class="cat-tag">é€ å‹</span>åæŒ‡é¡é¢</span> <input type="radio" name="service" value="mirror"></label>
            <label class="option-label"><span><span class="cat-tag">é€ å‹</span>åæŒ‡æ³•å¼</span> <input type="radio" name="service" value="french"></label>
            <label class="option-label"><span><span class="cat-tag">é€ å‹</span>åæŒ‡æ¼¸å±¤</span> <input type="radio" name="service" value="gradient"></label>
            <label class="option-label"><span><span class="cat-tag">é€ å‹</span>è‡ªå¸¶åœ–</span> <input type="radio" name="service" value="custom"></label>
            
            <label class="option-label"><span><span class="cat-tag">ç›²ç›’</span>è¶…å€¼ä¸æŒ‘æ¬¾</span> <input type="radio" name="service" value="blind_value"></label>
            <label class="option-label"><span><span class="cat-tag">ç›²ç›’</span>å«é‘½ä¸æŒ‘æ¬¾</span> <input type="radio" name="service" value="blind_diamond"></label>

            <label class="option-label"><span><span class="cat-tag">å»¶ç”²</span>åæŒ‡åŠè²¼å»¶ç”²</span> <input type="radio" name="service" value="ext_half"></label>
            <label class="option-label"><span><span class="cat-tag">å»¶ç”²</span>æ·ºè²¼åŠ é•·å»¶ç”²</span> <input type="radio" name="service" value="ext_long"></label>
            <label class="option-label"><span><span class="cat-tag">å»¶ç”²</span>åæŒ‡åŠè²¼å«é€ å‹</span> <input type="radio" name="service" value="ext_styled"></label>
        </div>
    </div>

    <div class="section">
        <div class="section-title">ä½ç½® (å¯è¤‡é¸)</div>
        <div class="input-group">
            <label class="option-label" style="flex:1"><span>æ‰‹éƒ¨</span> <input type="checkbox" id="pos_hand" checked></label>
            <label class="option-label" style="flex:1"><span>è¶³éƒ¨</span> <input type="checkbox" id="pos_foot"></label>
        </div>
        <div style="font-size: 0.8rem; margin-top: 5px; opacity: 0.7;">*éƒ¨åˆ†é€ å‹/å»¶ç”²è¶³éƒ¨æœƒè‡ªå‹•åŠ åƒ¹æˆ–ä¾åƒ¹ç›®è¡¨è¨ˆç®—</div>
    </div>

    <div class="section">
        <div class="section-title">å¸ç”²æœå‹™</div>
        <div class="options-grid">
            <label class="option-label"><span>ç„¡</span> <input type="radio" name="remove" value="none" checked></label>
            <label class="option-label"><span>æœ¬åº—å¸ç”²</span> <input type="radio" name="remove" value="our_shop"></label>
            <label class="option-label"><span>ä»–åº—å¸ç”²</span> <input type="radio" name="remove" value="other_shop"></label>
            <label class="option-label"><span>ç´”å¸ç”² (ä¸å«ä¿é¤Š)</span> <input type="radio" name="remove" value="pure"></label>
        </div>
    </div>

    <div class="section">
        <div class="input-group">
            <div class="input-wrapper">
                <label>è·³è‰²æ•¸é‡ ($100/æŒ‡)</label>
                <input type="number" id="jump_color" value="" placeholder="0" inputmode="numeric">
            </div>
            <div class="input-wrapper">
                <label>å…¶ä»–åŠ è³¼/å–®æŒ‡å»¶ç”² ($)</label>
                <input type="number" id="addon_price" value="" placeholder="0" inputmode="numeric">
            </div>
        </div>
    </div>

    <div class="promo-box">
        <div class="toggle-wrapper">
            <label for="birthday">ğŸ‚ ç•¶æœˆå£½æ˜Ÿå„ªæƒ  (9æŠ˜)</label>
            <input type="checkbox" id="birthday" style="width: 25px; height: 25px;">
        </div>
    </div>

    <div class="result-section">
        <div class="total-display" id="total_display">$0</div>
        <textarea id="quote_area"></textarea>
        <button class="copy-btn" onclick="copyQuote()">ğŸ“‹ è¤‡è£½å ±åƒ¹å–®</button>
    </div>

    <script>
        // --- 1. å®šç¾©åƒ¹ç›®è¡¨æ•¸æ“š (è³‡æ–™ä¾†æºï¼šä½ çš„åœ–ç‰‡) ---
        // æ ¼å¼ï¼š[åº—é•·åƒ¹, ç¾ç”²å¸«åƒ¹, åŠ©ç†åƒ¹]
        // null ä»£è¡¨è©²è·ç´šä¸æä¾›æ­¤æœå‹™
        const PRICES = {
            // æ‰‹è¶³åˆ†é–‹è¨ˆåƒ¹é …ç›® [æ‰‹éƒ¨åƒ¹, è¶³éƒ¨åƒ¹]
            'single': { 
                'manager': [1200, 1300], 'artist': [1000, 1200], 'assistant': [900, 1000],
                name: "å–®è‰²å‡è† " 
            },
            'cateye': { 
                'manager': [1300, 1400], 'artist': [1100, 1300], 'assistant': [1000, 1100],
                name: "è²“çœ¼å‡è† " 
            },
            
            // çµ±ä¸€åº•åƒ¹ + è¶³éƒ¨åŠ åƒ¹é …ç›® (é€ å‹é¡)
            // é€™è£¡å­˜çš„æ˜¯ [åº•åƒ¹]ï¼Œè¶³éƒ¨é‚è¼¯åœ¨è¨ˆç®—æ™‚ +200
            'mirror': { 'manager': 1500, 'artist': 1300, 'assistant': 1100, name: "åæŒ‡é¡é¢" },
            'french': { 'manager': 1600, 'artist': 1500, 'assistant': 1200, name: "åæŒ‡æ³•å¼" },
            'gradient': { 'manager': 1300, 'artist': 1300, 'assistant': 1100, name: "åæŒ‡æ¼¸å±¤" },
            'custom': { 'manager': 1300, 'artist': 1000, 'assistant': 800, name: "è‡ªå¸¶åœ–" }, // è‡ªå¸¶åœ–åº—é•·æ˜¯1300upï¼Œé€™é‚Šå…ˆè¨­1300
            
            // ç›²ç›’ (ç„¡è¶³éƒ¨åŠ åƒ¹èªªæ˜ï¼Œå‡è¨­çµ±ä¸€æˆ–ä¸åˆ†)
            'blind_value': { 'manager': 1500, 'artist': 1200, 'assistant': null, name: "è¶…å€¼ä¸æŒ‘æ¬¾" },
            'blind_diamond': { 'manager': 1700, 'artist': 1500, 'assistant': null, name: "å«é‘½ä¸æŒ‘æ¬¾" },

            // å»¶ç”² (ç„¡è¶³éƒ¨åŠ åƒ¹ï¼Œé™¤äº†å–®æŒ‡)
            'ext_half': { 'manager': 1200, 'artist': 1000, 'assistant': 1000, name: "åæŒ‡åŠè²¼å»¶ç”²" },
            'ext_long': { 'manager': 1500, 'artist': null, 'assistant': null, name: "æ·ºè²¼åŠ é•·å»¶ç”²" },
            'ext_styled': { 'manager': 2500, 'artist': 2000, 'assistant': 2000, name: "åæŒ‡åŠè²¼å«é€ å‹" }
        };

        // å¸ç”²åƒ¹æ ¼ [åº—é•·, ç¾ç”²å¸«, åŠ©ç†]
        const REMOVE_PRICES = {
            'none': [0, 0, 0],
            'our_shop': [300, 200, 200],
            'other_shop': [300, 300, 300],
            'pure': [0, 500, 500] // åº—é•·ç´”å¸ç”²åœ–ç‰‡å¯« - ï¼Œæš«è¨­0æˆ–éœ€æ‰‹å‹•
        };

        // ç•¶å‰é¸ä¸­çš„è·ç´š (é è¨­ç¾ç”²å¸«)
        let currentRole = 'artist'; 
        const roleNames = {'manager': 'åº—é•·', 'artist': 'ç¾ç”²å¸«', 'assistant': 'åŠ©ç†'};

        // --- 2. è·ç´šåˆ‡æ›é‚è¼¯ ---
        function setRole(role) {
            currentRole = role;
            // æ›´æ–°æŒ‰éˆ•æ¨£å¼
            document.querySelectorAll('.role-option').forEach(el => el.classList.remove('active'));
            document.querySelector(`.role-option[onclick="setRole('${role}')"]`).classList.add('active');
            calculate();
        }

        // --- 3. å–å¾—æ—¥æœŸ ---
        function getTodayDate() {
            const d = new Date();
            return `${d.getFullYear()}/${(d.getMonth()+1).toString().padStart(2,'0')}/${d.getDate().toString().padStart(2,'0')}`;
        }

        // --- 4. æ ¸å¿ƒè¨ˆç®—é‚è¼¯ ---
        function calculate() {
            // å–å¾—é¸ä¸­çš„æœå‹™
            const serviceVal = document.querySelector('input[name="service"]:checked').value;
            const serviceData = PRICES[serviceVal];
            
            // æª¢æŸ¥è©²è·ç´šæ˜¯å¦æœ‰æ­¤æœå‹™ (ä¾‹å¦‚åŠ©ç†æ²’æœ‰ç›²ç›’)
            let basePriceData = null;
            let isServiceAvailable = true;

            // åˆ¤æ–·æ•¸æ“šçµæ§‹æ˜¯ [æ‰‹, è¶³] é‚„æ˜¯ å–®ä¸€æ•¸å­—
            if (serviceData[currentRole] === null) {
                isServiceAvailable = false;
            } else {
                basePriceData = serviceData[currentRole];
            }

            // å–å¾—ä½ç½®
            const isHand = document.getElementById('pos_hand').checked;
            const isFoot = document.getElementById('pos_foot').checked;
            
            let serviceTotal = 0;
            let posTextArr = [];
            
            if (isServiceAvailable) {
                // é‚è¼¯åˆ†æ”¯ A: å–®è‰²/è²“çœ¼ (æ‰‹è¶³ä¸åŒåƒ¹)
                if (serviceVal === 'single' || serviceVal === 'cateye') {
                    if (isHand) {
                        serviceTotal += basePriceData[0];
                        posTextArr.push(`æ‰‹éƒ¨$${basePriceData[0]}`);
                    }
                    if (isFoot) {
                        serviceTotal += basePriceData[1];
                        posTextArr.push(`è¶³éƒ¨$${basePriceData[1]}`);
                    }
                } 
                // é‚è¼¯åˆ†æ”¯ B: é€ å‹/å»¶ç”² (åº•åƒ¹ + è¶³éƒ¨å›ºå®šåŠ åƒ¹200)
                else {
                    let itemPrice = basePriceData; // é€™æ˜¯æ•¸å­—
                    if (isHand) {
                        serviceTotal += itemPrice;
                        posTextArr.push("æ‰‹éƒ¨");
                    }
                    if (isFoot) {
                        // é€ å‹é¡è¶³éƒ¨åŠ 200ï¼Œå»¶ç”²é¡è¡¨å–®æ²’å¯«è¶³éƒ¨åŠ åƒ¹ï¼Œä½†é€šå¸¸å»¶ç”²æ˜¯æ‰‹éƒ¨ï¼Œé€™è£¡å‡è¨­å¦‚æœé¸è¶³éƒ¨å°±åŠ 200ï¼Œæˆ–æ˜¯ä¾å¯¦éš›æƒ…æ³
                        // æ ¹æ“šåœ–ç‰‡ï¼šå‡è† é€ å‹å€å¡Šæœ‰å¯«ã€Œè¶³éƒ¨é …ç›®+$200ã€ã€‚ç”²ç‰‡å»¶ç”²å€å¡Šæ²’å¯«ï¼Œåªæœ‰è¶³éƒ¨å–®æŒ‡å»¶é•·ã€‚
                        // ç‚ºäº†é˜²å‘†ï¼Œå¦‚æœæ˜¯é€ å‹é¡ (mirror, french, gradient, custom) è¶³éƒ¨+200
                        let surcharge = 0;
                        if (['mirror', 'french', 'gradient', 'custom'].includes(serviceVal)) {
                            surcharge = 200;
                        }
                        
                        // å¦‚æœæ‰‹è¶³éƒ½é¸ï¼Œé€šå¸¸æ˜¯åšå…©å¥—ï¼Œæ‰€ä»¥åƒ¹æ ¼ç´¯åŠ 
                        // ä½†å¦‚æœæ˜¯å–®ç´”é¸è¶³éƒ¨ï¼Œå°±æ˜¯ åº•åƒ¹+200
                        serviceTotal += (itemPrice + surcharge);
                        posTextArr.push(`è¶³éƒ¨(+$${surcharge})`);
                    }
                }
            } else {
                posTextArr.push("(æ­¤è·ç´šä¸æä¾›æ­¤é …ç›®)");
            }

            const posText = posTextArr.length > 0 ? posTextArr.join("+") : "æœªé¸æ“‡";

            // å¸ç”²
            const removeVal = document.querySelector('input[name="remove"]:checked').value;
            // æ ¹æ“šè·ç´šå–å¾—å¸ç”²åƒ¹ç´¢å¼•ï¼š0=åº—é•·, 1=ç¾ç”²å¸«, 2=åŠ©ç†
            // ç‚ºäº†æ–¹ä¾¿ï¼Œæˆ‘å€‘æ”¹äº†æ•¸æ“šçµæ§‹ç”¨ key å–å€¼
            // REMOVE_PRICES çµæ§‹: key: [åº—é•·, ç¾ç”²å¸«, åŠ©ç†]
            let roleIdx = 0;
            if (currentRole === 'artist') roleIdx = 1;
            if (currentRole === 'assistant') roleIdx = 2;
            
            const removePrice = REMOVE_PRICES[removeVal][roleIdx];
            const removeEl = document.querySelector(`input[name="remove"][value="${removeVal}"]`);
            // å–å¾—æ¨™ç±¤æ–‡å­— (ç§»é™¤ input æ¨™ç±¤å¾Œçš„ç´”æ–‡å­—)
            const removeName = removeEl.parentElement.querySelector('span').innerText;
            const removeText = removePrice === 0 ? removeName : `${removeName} ($${removePrice})`;

            // åŠ è³¼
            const jumpCount = parseInt(document.getElementById('jump_color').value) || 0;
            const jumpPrice = jumpCount * 100;
            const addonPrice = parseInt(document.getElementById('addon_price').value) || 0;
            const extraTotal = jumpPrice + addonPrice;

            // å„ªæƒ 
            const isBirthday = document.getElementById('birthday').checked;

            // ç¸½è¨ˆ
            let baseTotal = serviceTotal + removePrice + extraTotal;
            if (!isHand && !isFoot) baseTotal = 0; // æ²’é¸ä½ç½®æ­¸é›¶

            let finalTotal = isBirthday ? Math.round(baseTotal * 0.9) : baseTotal;
            let discountText = isBirthday ? " (å·²æŠ˜å£½æ˜Ÿ9æŠ˜)" : "";

            // é¡¯ç¤º
            document.getElementById('total_display').innerText = `$${finalTotal}`;

            // ç”Ÿæˆå ±åƒ¹å–®
            const quote = `ã€Fairy. L NAIL ART å ±åƒ¹å–®ã€‘
ğŸ“… æ—¥æœŸï¼š${getTodayDate()}
ğŸ‘¤ æœå‹™äººå“¡ï¼š${roleNames[currentRole]}
---------------------------
â–  é …ç›®ï¼š${serviceData.name}
â–  éƒ¨ä½ï¼š${posText}
â–  å¸ç”²ï¼š${removeText}
â–  åŠ è³¼ï¼šè·³è‰²${jumpCount}æŒ‡ / å…¶ä»–$${addonPrice}
---------------------------
ğŸ’° é ä¼°ç¸½é¡ï¼š$${finalTotal}${discountText}
ï¼Šæé†’ï¼šæœ¬åº—ä½œå“äº«æœ‰ä¸€é€±ä¿å›º
ï¼Šå„²å€¼æœƒå“¡å¦äº«å°ˆå±¬å„ªæƒ `;

            document.getElementById('quote_area').value = quote;
        }

        function copyQuote() {
            const textArea = document.getElementById("quote_area");
            textArea.select();
            textArea.setSelectionRange(0, 99999);
            navigator.clipboard.writeText(textArea.value).then(() => {
                alert("âœ… å ±åƒ¹å–®å·²è¤‡è£½ï¼");
            });
        }

        // ç¶å®šäº‹ä»¶
        document.querySelectorAll('input').forEach(el => {
            el.addEventListener('change', calculate);
            el.addEventListener('input', calculate);
        });

        // åˆå§‹åŒ–
        calculate();
    </script>
</body>
</html>
